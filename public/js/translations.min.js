/*
 * @link      https://github.com/rarog/TranslationManagerForAndroidApps for the canonical source repository
 * @copyright Copyright (c) 2017 Andrej Sinicyn
 * @license   https://www.gnu.org/licenses/gpl-3.0.html GNU General Public License version 3 or later
 */
function enableBootstrapTooltips(){$(function(){$('[data-toggle="tooltip"]').tooltip({container:"body"})})}function hideSelectionHint(a){var b=$("#selectionHint");if(a){b.addClass("hidden")}else{b.removeClass("hidden")}}function hideSpinner(a){var b=$("#spinner");if(a){b.addClass("hidden")}else{b.removeClass("hidden")}}function hideTranslationRow(a){var c=$("#translationRow");if(a){c.addClass("hidden");$("translationTableBody").empty()}else{c.removeClass("hidden");var b=$("#translations").DataTable()}}function setSelectionNeededState(){hideSelectionHint(false);hideSpinner(true);hideTranslationRow(true)}function showModalError(){$("#modalError").modal()}var curResources=resources;$("#showAll").on("change",function(a){var b=$("#app");b.selectpicker("deselectAll");$("option",b).remove();curApps=(a.target.checked)?appsAll:apps;curResources=(a.target.checked)?resourcesAll:resources;$.each(curApps,function(c,d){b.append('<option value="'+c+'">'+d+"</option>")})});$("#app").on("changed.bs.select",function(e,d,f,a){setSelectionNeededState();var c=$("#resource");$("option",c).remove();if(f){var b=$(this).val();if(b in curResources){$.each(curResources[b],function(g,h){c.append('<option value="'+g+'">'+h+"</option>")})}}c.selectpicker("refresh")});$("#resource").on("changed.bs.select",function(c,b,e,a){if(e){hideSelectionHint(true);hideSpinner(false);hideTranslationRow(true);var f=$("#app").val();var d=$(this).val();$.ajax({url:translationsPath+"/app/"+f+"/resource/"+d,dataType:"json",method:"GET"}).done(function(h){var g=$("#translations").DataTable();g.clear().rows.add(h).draw();hideSelectionHint(true);hideSpinner(true);hideTranslationRow(false);enableBootstrapTooltips()}).fail(function(g,i,h){setSelectionNeededState()})}else{setSelectionNeededState()}});$("#translations").on("click",".translationDetails",function(b){var d=$("#app").val();var c=$("#resource").val();var a=$(b.target).data("entryid");$.ajax({url:detailsPath+"/app/"+d+"/resource/"+c+"/entry/"+a,dataType:"json",method:"GET"}).done(function(e){if($.type(e)=="object"&&e.modal){$("#modalContainer").html(e.modal);$("#modalDetails").modal();enableBootstrapTooltips()}else{showModalError()}}).fail(function(e,g,f){showModalError()})});